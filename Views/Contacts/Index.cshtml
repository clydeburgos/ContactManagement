@{
    ViewData["Title"] = "Index";
}

<h1>Index</h1>

<p>
    <a asp-action="Create" class="btn btn-success">Create New</a>
</p>
<table class="table table-sm table-striped table-hover" id="contacts-table">
    <thead class="thead-dark">
        <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Phone Number</th>
            <th>Address</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>
<script>
    $(document).ready(function () {

        var table = $('#contacts-table').DataTable();

        $.ajax({
            url: '@Url.Action("GetContacts", "Contacts")',
            type: 'GET',
            dataType: 'json',
            success: function (data) {

                data.forEach(function (item) {
                    table.row.add([
                        item.firstName,
                        item.lastName,
                        item.email,
                        item.phoneNumber,
                        item.address,
                        '<a href="/Contacts/Edit/' + item.id + '">Edit</a> | ' + '<a href="/Contacts/Details/' + item.id + '">Details</a> | ' + '<a href="/Contacts/Delete/' + item.id + '">Delete</a>'
                    ]).draw(false);
                });
            },
            error: function (xhr, status, error) {
                console.error("Error fetching contacts: ", error);
            }
        });
    });
</script>